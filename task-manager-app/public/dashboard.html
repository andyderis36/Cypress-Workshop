<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager - Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-left">
        <h1 class="dashboard-title">üìù Task Manager</h1>
      </div>
      <div class="header-right">
        <button class="btn btn-icon theme-toggle" id="themeToggle" title="Toggle theme">
          <span class="theme-icon">üåô</span>
        </button>
        <div class="user-profile">
          <img src="" alt="Profile" class="profile-image" id="profileImage">
          <span class="user-email" id="userEmail">Loading...</span>
          <span class="user-role" id="userRole"></span>
        </div>
        <button class="btn btn-secondary" id="logoutBtn">Logout</button>
      </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
      <!-- Controls Section -->
      <div class="controls-section">
        <!-- Search Bar -->
        <div class="search-bar">
          <input
            type="text"
            id="searchInput"
            placeholder="üîç Search tasks..."
            class="search-input"
          >
        </div>

        <!-- Filter and Sort Controls -->
        <div class="filter-controls">
          <div class="control-group">
            <label for="filterStatus">Status:</label>
            <select id="filterStatus" class="filter-select">
              <option value="All">All</option>
              <option value="Active">Active</option>
              <option value="Completed">Completed</option>
            </select>
          </div>

          <div class="control-group">
            <label for="filterCategory">Category:</label>
            <select id="filterCategory" class="filter-select">
              <option value="All">All</option>
              <option value="Work">Work</option>
              <option value="Personal">Personal</option>
              <option value="Shopping">Shopping</option>
              <option value="Others">Others</option>
            </select>
          </div>

          <div class="control-group">
            <label for="sortBy">Sort by:</label>
            <select id="sortBy" class="filter-select">
              <option value="createdAt">Date Created</option>
              <option value="dueDate">Due Date</option>
              <option value="priority">Priority</option>
              <option value="name">Name (A-Z)</option>
            </select>
          </div>

          <button class="btn btn-secondary" id="resetFilters">Reset Filters</button>
        </div>
      </div>

      <!-- Add Task Section -->
      <div class="add-task-section">
        <h2>Add New Task</h2>
        <form id="addTaskForm" class="task-form">
          <div class="form-row">
            <div class="form-group">
              <label for="taskName">Task Name *</label>
              <input
                type="text"
                id="taskName"
                placeholder="Enter task name"
                minlength="3"
                maxlength="100"
                required
              >
              <span class="error-message" id="taskNameError"></span>
            </div>

            <div class="form-group">
              <label for="taskPriority">Priority *</label>
              <select id="taskPriority" required>
                <option value="Low">Low</option>
                <option value="Medium" selected>Medium</option>
                <option value="High">High</option>
              </select>
            </div>

            <div class="form-group">
              <label for="taskCategory">Category *</label>
              <select id="taskCategory" required>
                <option value="Work">Work</option>
                <option value="Personal" selected>Personal</option>
                <option value="Shopping">Shopping</option>
                <option value="Others">Others</option>
              </select>
            </div>

            <div class="form-group">
              <label for="taskDueDate">Due Date</label>
              <input type="date" id="taskDueDate">
            </div>
          </div>

          <div class="form-group">
            <label for="taskDescription">Description (Optional)</label>
            <textarea
              id="taskDescription"
              placeholder="Enter task description"
              rows="2"
            ></textarea>
          </div>

          <button type="submit" class="btn btn-primary" id="addTaskBtn">
            <span class="btn-text">+ Add Task</span>
            <span class="btn-loader" style="display: none;"></span>
          </button>
        </form>
      </div>

      <!-- Bulk Actions Bar -->
      <div class="bulk-actions-bar" id="bulkActionsBar" style="display: none;">
        <div class="bulk-info">
          <span id="selectedCount">0</span> task(s) selected
        </div>
        <div class="bulk-buttons">
          <button class="btn btn-success" id="bulkCompleteBtn">‚úì Mark Complete</button>
          <button class="btn btn-danger" id="bulkDeleteBtn">üóëÔ∏è Delete Selected</button>
          <button class="btn btn-secondary" id="clearSelectionBtn">Clear Selection</button>
        </div>
      </div>

      <!-- Task Statistics -->
      <div class="task-stats">
        <div class="stat-card">
          <span class="stat-label">Total Tasks:</span>
          <span class="stat-value" id="totalTasks">0</span>
        </div>
        <div class="stat-card">
          <span class="stat-label">Active:</span>
          <span class="stat-value" id="activeTasks">0</span>
        </div>
        <div class="stat-card">
          <span class="stat-label">Completed:</span>
          <span class="stat-value" id="completedTasks">0</span>
        </div>
        <div class="stat-card">
          <span class="stat-label">Showing:</span>
          <span class="stat-value" id="showingTasks">0</span>
        </div>
      </div>

      <!-- Loading Skeleton -->
      <div class="loading-skeleton" id="loadingSkeleton">
        <div class="skeleton-task"></div>
        <div class="skeleton-task"></div>
        <div class="skeleton-task"></div>
        <div class="skeleton-task"></div>
        <div class="skeleton-task"></div>
      </div>

      <!-- Task List -->
      <div class="task-list-container" id="taskListContainer" style="display: none;">
        <div class="task-list-header">
          <label class="checkbox-wrapper">
            <input type="checkbox" id="selectAllCheckbox">
            <span>Select All</span>
          </label>
        </div>
        <div class="task-list" id="taskList">
          <!-- Tasks will be dynamically inserted here -->
        </div>
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-icon">üìã</div>
        <h3>No tasks found</h3>
        <p id="emptyStateMessage">Create your first task to get started!</p>
      </div>

      <!-- Pagination -->
      <div class="pagination" id="pagination" style="display: none;">
        <button class="btn btn-secondary" id="prevPage" disabled>‚Üê Previous</button>
        <div class="page-info">
          Page <span id="currentPage">1</span> of <span id="totalPages">1</span>
        </div>
        <button class="btn btn-secondary" id="nextPage" disabled>Next ‚Üí</button>
      </div>
    </main>
  </div>

  <!-- Edit Task Modal -->
  <div class="modal" id="editModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Edit Task</h2>
        <button class="modal-close" id="closeEditModal">&times;</button>
      </div>
      <form id="editTaskForm">
        <input type="hidden" id="editTaskId">

        <div class="form-group">
          <label for="editTaskName">Task Name *</label>
          <input
            type="text"
            id="editTaskName"
            placeholder="Enter task name"
            minlength="3"
            maxlength="100"
            required
          >
          <span class="error-message" id="editTaskNameError"></span>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="editTaskPriority">Priority *</label>
            <select id="editTaskPriority" required>
              <option value="Low">Low</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
            </select>
          </div>

          <div class="form-group">
            <label for="editTaskCategory">Category *</label>
            <select id="editTaskCategory" required>
              <option value="Work">Work</option>
              <option value="Personal">Personal</option>
              <option value="Shopping">Shopping</option>
              <option value="Others">Others</option>
            </select>
          </div>

          <div class="form-group">
            <label for="editTaskDueDate">Due Date</label>
            <input type="date" id="editTaskDueDate">
          </div>
        </div>

        <div class="form-group">
          <label for="editTaskDescription">Description</label>
          <textarea
            id="editTaskDescription"
            placeholder="Enter task description"
            rows="3"
          ></textarea>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
          <button type="submit" class="btn btn-primary" id="saveEditBtn">
            <span class="btn-text">Save Changes</span>
            <span class="btn-loader" style="display: none;"></span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal" id="deleteModal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Confirm Delete</h2>
        <button class="modal-close" id="closeDeleteModal">&times;</button>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to delete this task?</p>
        <p class="task-to-delete" id="taskToDelete"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
          <span class="btn-text">Delete</span>
          <span class="btn-loader" style="display: none;"></span>
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="app.js"></script>
</body>
</html>
